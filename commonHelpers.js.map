{"version":3,"file":"commonHelpers.js","sources":["../src/services/refs.js","../src/services/simplylightbox.js","../src/services/api.js","../src/services/massages-function.js","../src/services/scrollImg-function.js","../src/services/loader-functions.js","../src/services/loadMoreBtn-functions.js","../src/services/createMarkup-function.js","../src/main.js"],"sourcesContent":["const refs = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('.search-inp'),\n  searchBtn: document.querySelector('.search-btn'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-btn'),\n  loader: document.querySelector('.loader'),\n};\nexport { refs };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst simplyGallery = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport { simplyGallery };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst API_KEY = '41834264-e3d0e5d80121a8a176d918e74';\n\nasync function getImages({ query, page = 1, per_page }) {\n  const data = await axios.get('/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page,\n      page,\n    },\n  });\n  return data.data;\n}\nexport { getImages };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction createMessage(message) {\n  iziToast.show({\n    class: 'error-svg',\n    position: 'topRight',\n    icon: 'error-svg',\n    message: message,\n    maxWidth: '432',\n    messageColor: '#fff',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    close: false,\n    closeOnClick: true,\n  });\n}\nexport { createMessage };\n","function scrollImg() {\n  const rect = document.querySelector('.gallery-link').getBoundingClientRect();\n  window.scrollBy({ top: rect.height * 2, left: 0, behavior: 'smooth' });\n}\n\nexport { scrollImg };\n","import { refs } from './refs.js';\n\nfunction showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n\nexport { showLoader, hideLoader };\n","import { refs } from './refs';\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n\nexport { showLoadMoreBtn, hideLoadMoreBtn };\n","function createMarkup(hits, gallery) {\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n        <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n    <p class=\"gallery-descr\">likes: <span class=\"descr-span\">${likes}</span> views: <span class=\"descr-span\">${views}</span> comments: <span class=\"descr-span\">${comments}</span> downloads: <span class=\"descr-span\">${downloads}</span></p>\n  </a>\n</li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport { createMarkup };\n","import { refs } from './services/refs.js';\nimport { simplyGallery } from './services/simplylightbox.js';\nimport { getImages } from './services/api.js';\nimport { createMessage } from './services/massages-function.js';\nimport { scrollImg } from './services/scrollImg-function.js';\nimport { hideLoader, showLoader } from './services/loader-functions.js';\nimport {\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n} from './services/loadMoreBtn-functions.js';\nimport { createMarkup } from './services/createMarkup-function.js';\n\nconst queryParams = {\n  page: 1,\n  query: '',\n  maxPage: 0,\n  per_page: 40,\n};\n\nrefs.form.addEventListener('submit', onSearch);\nasync function onSearch(event) {\n  event.preventDefault();\n  hideLoadMoreBtn();\n  refs.gallery.innerHTML = '';\n  queryParams.page = 1;\n  queryParams.query = refs.form.query.value.trim();\n  if (!queryParams.query) {\n    createMessage(\n      `The search field can't be emptyðŸ˜‰! Please, enter your request!`\n    );\n    return;\n  }\n  try {\n    showLoader();\n    const { hits, totalHits } = await getImages(queryParams);\n    queryParams.maxPage = Math.ceil(totalHits / queryParams.per_page);\n    createMarkup(hits, refs.gallery);\n    simplyGallery.refresh();\n    if (hits.length > 0) {\n      showLoadMoreBtn();\n      refs.loadMoreBtn.addEventListener('click', onLoadMore);\n    } else {\n      hideLoadMoreBtn();\n      createMessage(\n        `Sorry, there are no images matching your search queryðŸ™ƒ. Please, try again!`\n      );\n    }\n    hideLoader();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    refs.form.reset();\n    if (queryParams.page === queryParams.maxPage) {\n      hideLoadMoreBtn();\n      createMessage(\n        \"We're sorry, but you've reached the end of search resultsðŸ™ƒ!\"\n      );\n    }\n  }\n}\n\nasync function onLoadMore() {\n  queryParams.page += 1;\n  try {\n    showLoader();\n    hideLoadMoreBtn();\n    const { hits } = await getImages(queryParams);\n    createMarkup(hits, refs.gallery);\n    simplyGallery.refresh();\n    hideLoader();\n    scrollImg();\n    showLoadMoreBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    if (queryParams.page === queryParams.maxPage) {\n      hideLoadMoreBtn();\n      createMessage(\n        \"We're sorry, but you've reached the end of search resultsðŸ™ƒ!\"\n      );\n    }\n  }\n}\n"],"names":["refs","simplyGallery","SimpleLightbox","axios","API_KEY","getImages","query","page","per_page","createMessage","message","iziToast","scrollImg","rect","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","createMarkup","hits","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","queryParams","onSearch","event","totalHits","onLoadMore","error"],"mappings":"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"}